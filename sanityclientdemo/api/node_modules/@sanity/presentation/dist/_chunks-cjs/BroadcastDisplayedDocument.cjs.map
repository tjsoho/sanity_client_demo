{"version":3,"file":"BroadcastDisplayedDocument.cjs","sources":["../../src/loader/BroadcastDisplayedDocument.tsx"],"sourcesContent":["import {memo, useEffect} from 'react'\nimport type {SanityDocument} from 'sanity'\nimport {usePresentationParams} from '../usePresentationParams'\nimport {useDisplayedDocumentBroadcaster} from './DisplayedDocumentBroadcaster'\n\n/**\n * Sanity Form input component that reads the current form state and broadcasts it to\n * the live query store\n */\nfunction BroadcastDisplayedDocument(props: {\n  value: Partial<SanityDocument> | null | undefined\n}): JSX.Element | null {\n  const setDisplayedDocument = useDisplayedDocumentBroadcaster()\n  const params = usePresentationParams(false)\n\n  useEffect(() => {\n    const timeout = setTimeout(() => setDisplayedDocument?.(props.value), 10)\n    return () => clearTimeout(timeout)\n  }, [params?.perspective, props.value, setDisplayedDocument])\n\n  return null\n}\n\nexport default memo(BroadcastDisplayedDocument)\n"],"names":["useDisplayedDocumentBroadcaster","usePresentationParams","useEffect","memo"],"mappings":";;AASA,SAAS,2BAA2B,OAEb;AACrB,QAAM,uBAAuBA,6BAAAA,gCACvB,GAAA,SAASC,4BAAsB,EAAK;AAE1C,SAAAC,MAAA,UAAU,MAAM;AACd,UAAM,UAAU,WAAW,MAAM,uBAAuB,MAAM,KAAK,GAAG,EAAE;AACjE,WAAA,MAAM,aAAa,OAAO;AAAA,EAAA,GAChC,CAAC,QAAQ,aAAa,MAAM,OAAO,oBAAoB,CAAC,GAEpD;AACT;AAEA,IAAeC,+BAAAA,MAAAA,KAAK,0BAA0B;;"}