{
  "version": 3,
  "sources": ["../../../sanity/src/core/studio/ViteDevServerStopped.tsx"],
  "sourcesContent": ["/* eslint-disable i18next/no-literal-string -- will not support i18n in error boundaries */\nimport {Card, Container, Heading, Stack, Text} from '@sanity/ui'\nimport {type ReactNode, useCallback, useEffect, useState} from 'react'\nimport {type ViteHotContext} from 'vite/types/hot.js'\n\nconst ERROR_TITLE = 'Dev server stopped'\nconst ERROR_DESCRIPTION =\n  'The development server has stopped. You may need to restart it to continue working.'\n\nclass ViteDevServerStoppedError extends Error {\n  ViteDevServerStoppedError: boolean\n\n  constructor() {\n    super(ERROR_TITLE)\n    this.name = 'ViteDevServerStoppedError'\n    this.ViteDevServerStoppedError = true\n  }\n}\nconst serverHot = import.meta.hot\nconst isViteServer = (hot: unknown): hot is ViteHotContext => Boolean(hot)\n\nconst useDetectViteDevServerStopped = () => {\n  const [devServerStopped, setDevServerStopped] = useState(false)\n\n  const markDevServerStopped = useCallback(() => setDevServerStopped(true), [])\n\n  useEffect(() => {\n    // no early return to optimize tree-shaking\n    if (isViteServer(serverHot)) {\n      serverHot.on('vite:ws:disconnect', markDevServerStopped)\n    }\n  }, [markDevServerStopped])\n\n  return {devServerStopped}\n}\n\nconst ThrowViteServerStopped = () => {\n  const {devServerStopped} = useDetectViteDevServerStopped()\n\n  if (devServerStopped) throw new ViteDevServerStoppedError()\n\n  return null\n}\n\nexport const DetectViteDevServerStopped = (): ReactNode =>\n  isViteServer(serverHot) ? <ThrowViteServerStopped /> : null\n\nexport const DevServerStoppedErrorScreen = (): ReactNode => (\n  <Card\n    height=\"fill\"\n    overflow=\"auto\"\n    paddingY={[4, 5, 6, 7]}\n    paddingX={4}\n    sizing=\"border\"\n    tone=\"critical\"\n  >\n    <Container width={3}>\n      <Stack space={4}>\n        <Heading>{ERROR_TITLE}</Heading>\n\n        <Card border radius={2} overflow=\"auto\" padding={4} tone=\"inherit\">\n          <Stack space={4}>\n            <Text size={2}>{ERROR_DESCRIPTION}</Text>\n          </Stack>\n        </Card>\n      </Stack>\n    </Container>\n  </Card>\n)\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;AAKA,IAAM,cAAc;AAApB,IACM,oBACJ;AAEF,IAAM,4BAAN,cAAwC,MAAM;EAG5C,cAAc;AACZ,UAAM,WAAW;AAHnB;AAIE,SAAK,OAAO,6BACZ,KAAK,4BAA4B;EACnC;AACF;AACA,IAAM,YAAY,YAAY;AAA9B,IACM,eAAe,CAAC,QAAwC,CAAA,CAAQ;AADtE,IAGM,gCAAgC,MAAM;AAC1C,QAAM,CAAC,kBAAkB,mBAAmB,QAAI,uBAAS,KAAK,GAExD,2BAAuB,0BAAY,MAAM,oBAAoB,IAAI,GAAG,CAAE,CAAA;AAE5E,aAAA,wBAAU,MAAM;AAEV,iBAAa,SAAS,KACxB,UAAU,GAAG,sBAAsB,oBAAoB;EAAA,GAExD,CAAC,oBAAoB,CAAC,GAElB,EAAC,iBAAgB;AAC1B;AAhBA,IAkBM,yBAAyB,MAAM;AAC7B,QAAA,EAAC,iBAAA,IAAoB,8BAAA;AAEvB,MAAA;AAAwB,UAAA,IAAI,0BAAA;AAEzB,SAAA;AACT;AAxBA,IA0Ba,6BAA6B,MACxC,aAAa,SAAS,QAAA,wBAAK,wBAAuB,CAAA,CAAA,IAAK;AA3BzD,IA6Ba,8BAA8B,UACzC;EAAC;EAAA;IACC,QAAO;IACP,UAAS;IACT,UAAU,CAAC,GAAG,GAAG,GAAG,CAAC;IACrB,UAAU;IACV,QAAO;IACP,MAAK;IAEL,cAAA,wBAAC,WAAU,EAAA,OAAO,GAChB,cAAC,yBAAA,OAAA,EAAM,OAAO,GACZ,UAAA;UAAA,wBAAC,SAAA,EAAS,UAAY,YAAA,CAAA;UAEtB,wBAAC,MAAA,EAAK,QAAM,MAAC,QAAQ,GAAG,UAAS,QAAO,SAAS,GAAG,MAAK,WACvD,cAAC,wBAAA,OAAA,EAAM,OAAO,GACZ,cAAA,wBAAC,MAAA,EAAK,MAAM,GAAI,UAAkB,kBAAA,CAAA,EAAA,CACpC,EACF,CAAA;IAAA,EAAA,CACF,EACF,CAAA;EAAA;AACF;",
  "names": []
}
